

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head><title>
	
    
    Code Blog Foo: tuple

</title><link href="../Content/base.css" rel="stylesheet" type="text/css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    
    <script src="../../Scripts/shAll.js" type="text/javascript"></script>
    <link href="../../Content/SyntaxHighlighter.css" rel="stylesheet" type="text/css" />
</head>
<body>
<strong>This is an archive of blog posts from a "long time ago".  If you find this useful, let me know and I'll revive it.</strong>
    <div class="wrap">
        
        <div id="top group">
            <header>
                <h1>code blog foo - tag line bar</h1>
            </header>
            <div style="padding: 5px; border-bottom: 1px solid silver; border-top: 1px solid silver;">
                <nav>
                    <a href="/" style="margin-left: 15px; border-style: solid; border-width: 1px;">home</a>
                    <span class="sep"></span>
                    <a href="/Blog/Posts" style="margin-left: 15px; border-style: solid; border-width: 1px;">blog</a>
                    <a href="/Home/About" style="margin-left: 15px; border-style: solid; border-width: 1px;">about</a>
                    <a href="/Home/Portfolio" style="margin-left: 15px; border-style: solid; border-width: 1px;">projects/open source</a>
                </nav>
            </div>
        </div>
        
        <div class="content">
            
    
    
    <script type="text/javascript">
        window.onload = function () {
            SyntaxHighlighter.config.clipboardSwf = '/Scripts/clipboard.swf';
            SyntaxHighlighter.all();
            dp.SyntaxHighlighter.HighlightAll('code');
        };

     </script>
    <h2>Tuple for .Net 3.5</h2>

Still working in .Net 3.5 and you want to take advantage of the new .Net 4.0 Tuple?  Well this is probably the best you'll be able to get in .Net 3.5.  The code below will give you up to 10 items in a Tuple...if you find yourself needing more than that, then it's probably time to consider making a real class.

<h3>When should I use a Tuple?</h3>
<img src="../../Content/images/goodideabadidea.JPG" />
<h3>Good Idea</h3>
<p>
    <strong>Use tuples to return interfaces that are related:</strong>
</p>
<pre name="code" class="c#">
public interface ICustomerRetriever
{
    //Item 1: Summary Customer information, Item 2: Detailed customer information
    Tuple&lt;ICustomer, ICustomerDetail&gt; GetCustomer(Guid customerId);

    //Item 1: Customer's first name, Item 2: Customer's last name
    Tuple&lt;string, string&gt; GetCustomerName(Guid customerId);

    //Sometimes key value pair makes more sense.  So don't 
    //immediately use Tuples...consider what makes the most sense...
    //Key: Id of parent customer, Value: Summary information of Parent Customer
    KeyValuePair&lt;Guid, ICustomer&gt; GetParentCustomer(Guid childCustomerId);
}
</pre>
<p>
    <strong>Use tuples in your unit tests that leverage mocks:</strong>
</p>
<pre name="code" class="c#">
TestClass
public class when_checking_to_see_if_user_can_save_customer  : IRoleRetriever
{
   //entity we are trying to test
   private ICustomerSaver _customerSaver;
   
   //constructor
   public when_checking_to_see_if_user_can_save_customer()
   {
        //new up the ICustomerSaver and inject the unit test as the mock for IRoleRetriever
        //the constructor for CustomerSaver is: 
        //CustomerSaver(IRoleRetriever roleRetriever)
        _customerSaver = new CustomerSaver(this);
   }

   TestMethod
   public void should_delegate_role_check_to_IRoleRetriever()
   {
        int userId = 12;
        int companyId = 17;
        string customerFirstName = "John";
        string customerLastName = "Doe";
   
        //The SaveCustomer method would ensure that
        //the user has access to save a customer
        //given the role "CanSaveCustomer".  Inside the 
        //SaveCustomer method, a call is made to the
        //RoleRetriver passing in the userId and the companyId.
        //This unit test ensures that the userId and companyId
        //are not inadvertently flipped when calling 
        //RoleRetriever.RoleExists(userId, companyId, "CanSaveCustomer")

        _customerSaver.SaveCustomer(userId, 
            companyId, 
            customerFirstName,
            customerLastName);

        //these assertions would fail if the SaveCustomer method was
        //calling _roleRetriever.RoleExists(companyId, userId, "CanSaveCustomer")
        //as opposed to _roleRetriever.RoleExists(userId, companyId, "CanSaveCustomer")
        Assert.AreEqual(12, _tupleForRoleExists.Item1);
        Assert.AreEqual(17, _tupleForRoleExists.Item2);
        Assert.AreEqual("CanSaveCustomer", _tupleForRoleExists.Item3);
       
   }

   //this tuple is updated every time the RoleExists method is 
   //called via the IRoleRetriever method
   private Tuple&lt;int, int, string&gt; _tupleForRoleExists = 
      new Tuple&lt;int, int, string&gt();
   
   //this is the mocked role retriever method that just records what was passed in
   bool IRoleRetriever.RoleExists(int userId, int companyId, string role)
   {
        _tupleForRoleExists.Item1 = userId;
        _tupleForRoleExists.Item2 = companyId;
        _tupleForRoleExists.Item3 = role;
        return true;
   }
}
</pre>

<h3>Bad Idea</h3>
<p>
    <strong>Don't use tuples cause you're lazy...</strong>
</p>
<pre name="code" class="c#">
//this is a bad idea, do not do this.....
public interface ICustomerRetriever
{
    //Item 1: Customer's first name, Item 2: Customer's middle name
    //Item 3: Customer's last name, Item 4: Date of Birth
    Tuple&lt;string, string, string, DateTime&gt; GetCustomer(Guid customerId);
}
</pre>

<h3>Source Code for Tuple</h3>

<pre name="code" class="c#">
public class Tuple&lt;T&gt;
{
    public Tuple(T item1)
    {
        Item1 = item1;
    }
    
    public T Item1 { get; set; }
}

public class Tuple&lt;T, T2&gt; 
        : Tuple&lt;T&gt;
{
    public Tuple(T item1, T2 item2)
        : base(item1)
    {
        Item2 = item2;
    }
    
    public T2 Item2 { get; set; }
}

public class Tuple&lt;T, T2, T3&gt; 
        : Tuple&lt;T, T2&gt;
{
    public Tuple(T item1, T2 item2, T3 item3)
        : base(item1, item2)
    {
        Item3 = item3;
    }

    public T3 Item3 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4&gt; 
        : Tuple&lt;T, T2, T3&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4)
        : base(item1, item2, item3)
    {
        Item4 = item4;
    }

    public T4 Item4 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5&gt; 
        : Tuple&lt;T, T2, T3, T4&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, T5 item5)
        : base(item1, item2, item3, item4)
    {
        Item5 = item5;
    }

    public T5 Item5 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5, T6&gt; 
        : Tuple&lt;T, T2, T3, T4, T5&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, T5 item5, T6 item6)
        : base(item1, item2, item3, item4, item5)
    {
        Item6 = item6;
    }

    public T6 Item6 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5, T6, T7&gt; 
        : Tuple&lt;T, T2, T3, T4, T5, T6&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, T5 item5, T6 item6, T7 item7)
        : base(item1, item2, item3, item4, item5, item6)
    {
        Item7 = item7;
    }

    public T7 Item7 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5, T6, T7, T8&gt; 
        : Tuple&lt;T, T2, T3, T4, T5, T6, T7&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, T5 item5, T6 item6, T7 item7, T8 item8)
        : base(item1, item2, item3, item4, item5, item6, item7)
    {
        Item8 = item8;
    }

    public T8 Item8 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5, T6, T7, T8, T9&gt; 
        : Tuple&lt;T, T2, T3, T4, T5, T6, T7, T8&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, 
                 T5 item5, T6 item6, T7 item7, T8 item8, T9 item9)
        : base(item1, item2, item3, item4, item5, item6, item7, item8)
    {
        Item9 = item9;
    }

    public T9 Item9 { get; set; }
}

public class Tuple&lt;T, T2, T3, T4, T5, T6, T7, T8, T9, T10&gt; 
        : Tuple&lt;T, T2, T3, T4, T5, T6, T7, T8, T9&gt;
{
    public Tuple(T item1, T2 item2, T3 item3, T4 item4, 
                 T5 item5, T6 item6, T7 item7, T8 item8, T9 item9, T10 item10)
        : base(item1, item2, item3, item4, item5, item6, item7, item8, item9)
    {
        Item10 = item10;
    }

    public T10 Item10 { get; set; }
}
</pre>
    <hr />
    <span style="color: Silver; font-size: small;">Written: 3/28/2010</span>
    
    <script>
        var idcomments_acct = '6ed8d3f7f3b269a55fc308e535627d11';
        var idcomments_post_url;

        var  idcomments_post_id;// = 'http%3A%2F%2Famirrajan.net%2FBlogs%2F' + 'tuple';

    </script>
    <span id="IDCommentsPostTitle" style="display:none">Comments</span>
    <script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>
    <script>$("#body").append('<div></div>').html(idcomments_post_id);</script>

        </div>
    </div>
</body>
</html>
